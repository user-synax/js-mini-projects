<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop Inventory Manager</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-out',
                        'slide-up': 'slideUp 0.5s ease-out',
                        'bounce-slow': 'bounce 3s infinite',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .dark .glass-effect {
            background: rgba(17, 24, 39, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .card-hover {
            transition: all 0.3s ease;
        }

        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .input-focus:focus {
            transform: scale(1.02);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }
    </style>
</head>

<body class="bg-gray-50 text-gray-800 font-sans antialiased">

    <!-- Auth Container -->
    <div id="authContainer" class="min-h-screen flex items-center justify-center gradient-bg p-4">
        <div class="w-full max-w-md">
            <!-- Logo -->
            <div class="text-center mb-8 animate-fade-in">
                <div
                    class="inline-flex items-center justify-center w-20 h-20 bg-white rounded-2xl shadow-2xl mb-4 transform hover:rotate-12 transition-transform duration-300">
                    <i class="fas fa-boxes-stacked text-4xl text-indigo-600"></i>
                </div>
                <h1 class="text-4xl font-bold text-white mb-2">Inventory Pro</h1>
                <p class="text-indigo-100">Manage your shop with ease</p>
            </div>

            <!-- Auth Card -->
            <div class="glass-effect rounded-3xl shadow-2xl p-8 animate-slide-up">
                <!-- Tabs -->
                <div class="flex mb-6 bg-gray-100 rounded-xl p-1">
                    <button onclick="switchAuthTab('login')" id="loginTab"
                        class="flex-1 py-3 rounded-lg font-semibold transition-all duration-300 bg-white text-indigo-600 shadow-sm">
                        Sign In
                    </button>
                    <button onclick="switchAuthTab('signup')" id="signupTab"
                        class="flex-1 py-3 rounded-lg font-semibold transition-all duration-300 text-gray-500 hover:text-gray-700">
                        Sign Up
                    </button>
                </div>

                <!-- Login Form -->
                <form id="loginForm" class="space-y-4" onsubmit="handleLogin(event)">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                        <div class="relative">
                            <i class="fas fa-envelope absolute left-4 top-3.5 text-gray-400"></i>
                            <input type="email" id="loginEmail" required
                                class="w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-indigo-500 input-focus transition-all"
                                placeholder="you@example.com">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                        <div class="relative">
                            <i class="fas fa-lock absolute left-4 top-3.5 text-gray-400"></i>
                            <input type="password" id="loginPassword" required
                                class="w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-indigo-500 input-focus transition-all"
                                placeholder="••••••••">
                        </div>
                    </div>
                    <button type="submit"
                        class="w-full bg-indigo-600 text-white py-3 rounded-xl font-semibold hover:bg-indigo-700 transform hover:scale-[1.02] transition-all duration-200 shadow-lg hover:shadow-xl">
                        Sign In
                    </button>
                </form>

                <!-- Signup Form -->
                <form id="signupForm" class="space-y-4 hidden" onsubmit="handleSignup(event)">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Full Name</label>
                        <div class="relative">
                            <i class="fas fa-user absolute left-4 top-3.5 text-gray-400"></i>
                            <input type="text" id="signupName" required
                                class="w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-indigo-500 input-focus transition-all"
                                placeholder="John Doe">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                        <div class="relative">
                            <i class="fas fa-envelope absolute left-4 top-3.5 text-gray-400"></i>
                            <input type="email" id="signupEmail" required
                                class="w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-indigo-500 input-focus transition-all"
                                placeholder="you@example.com">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                        <div class="relative">
                            <i class="fas fa-lock absolute left-4 top-3.5 text-gray-400"></i>
                            <input type="password" id="signupPassword" required minlength="6"
                                class="w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-indigo-500 input-focus transition-all"
                                placeholder="••••••••">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Shop Name</label>
                        <div class="relative">
                            <i class="fas fa-store absolute left-4 top-3.5 text-gray-400"></i>
                            <input type="text" id="signupShop" required
                                class="w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-indigo-500 input-focus transition-all"
                                placeholder="My Awesome Shop">
                        </div>
                    </div>
                    <button type="submit"
                        class="w-full bg-indigo-600 text-white py-3 rounded-xl font-semibold hover:bg-indigo-700 transform hover:scale-[1.02] transition-all duration-200 shadow-lg hover:shadow-xl">
                        Create Account
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Dashboard Container -->
    <div id="dashboardContainer" class="hidden min-h-screen bg-gray-50">
        <!-- Sidebar -->
        <aside
            class="fixed left-0 top-0 h-full w-64 bg-white shadow-2xl transform -translate-x-full md:translate-x-0 transition-transform duration-300 z-50"
            id="sidebar">
            <div class="p-6 border-b border-gray-100">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-indigo-600 rounded-xl flex items-center justify-center">
                        <i class="fas fa-boxes-stacked text-white"></i>
                    </div>
                    <div>
                        <h2 class="font-bold text-gray-800" id="shopNameDisplay">My Shop</h2>
                        <p class="text-xs text-gray-500">Inventory System</p>
                    </div>
                </div>
            </div>

            <nav class="p-4 space-y-2">
                <button onclick="showSection('dashboard')"
                    class="w-full flex items-center gap-3 px-4 py-3 rounded-xl bg-indigo-50 text-indigo-600 font-medium transition-all hover:bg-indigo-100">
                    <i class="fas fa-chart-line w-5"></i>
                    Dashboard
                </button>
                <button onclick="showSection('inventory')"
                    class="w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-600 hover:bg-gray-50 font-medium transition-all">
                    <i class="fas fa-box w-5"></i>
                    Inventory
                </button>
                <button onclick="showSection('analytics')"
                    class="w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-600 hover:bg-gray-50 font-medium transition-all">
                    <i class="fas fa-chart-pie w-5"></i>
                    Analytics
                </button>
                <button onclick="showSection('settings')"
                    class="w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-600 hover:bg-gray-50 font-medium transition-all">
                    <i class="fas fa-cog w-5"></i>
                    Settings
                </button>
            </nav>

            <div class="absolute bottom-0 left-0 right-0 p-4 border-t border-gray-100">
                <div class="flex items-center gap-3 px-4 py-3 rounded-xl bg-gray-50">
                    <div class="w-10 h-10 bg-gradient-to-br from-indigo-400 to-purple-500 rounded-full flex items-center justify-center text-white font-bold"
                        id="userAvatar">
                        JD
                    </div>
                    <div class="flex-1 min-w-0">
                        <p class="font-medium text-gray-800 truncate" id="userNameDisplay">John Doe</p>
                        <p class="text-xs text-gray-500 truncate" id="userEmailDisplay">john@example.com</p>
                    </div>
                    <button onclick="logout()" class="text-gray-400 hover:text-red-500 transition-colors">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>
        </aside>

        <!-- Mobile Menu Button -->
        <button onclick="toggleSidebar()" class="md:hidden fixed top-4 left-4 z-50 bg-white p-3 rounded-xl shadow-lg">
            <i class="fas fa-bars text-gray-600"></i>
        </button>

        <!-- Main Content -->
        <main class="md:ml-64 p-4 md:p-8">
            <!-- Dashboard Section -->
            <div id="dashboardSection" class="space-y-6 animate-fade-in">
                <div class="flex justify-between items-center">
                    <div>
                        <h1 class="text-3xl font-bold text-gray-800">Dashboard</h1>
                        <p class="text-gray-500 mt-1">Welcome back! Here's your shop overview.</p>
                    </div>
                    <button onclick="openAddModal()"
                        class="bg-indigo-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-indigo-700 transition-all shadow-lg hover:shadow-xl flex items-center gap-2">
                        <i class="fas fa-plus"></i>
                        Add Product
                    </button>
                </div>

                <!-- Stats Cards -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                    <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 card-hover">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="text-gray-500 text-sm font-medium">Total Products</p>
                                <h3 class="text-3xl font-bold text-gray-800 mt-2" id="totalProducts">0</h3>
                            </div>
                            <div class="w-12 h-12 bg-blue-50 rounded-xl flex items-center justify-center">
                                <i class="fas fa-box text-blue-600 text-xl"></i>
                            </div>
                        </div>
                        <p class="text-green-500 text-sm mt-4 flex items-center gap-1">
                            <i class="fas fa-arrow-up"></i>
                            <span id="productsGrowth">+12%</span>
                            <span class="text-gray-400">from last month</span>
                        </p>
                    </div>

                    <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 card-hover">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="text-gray-500 text-sm font-medium">Total Value</p>
                                <h3 class="text-3xl font-bold text-gray-800 mt-2" id="totalValue">$0</h3>
                            </div>
                            <div class="w-12 h-12 bg-green-50 rounded-xl flex items-center justify-center">
                                <i class="fas fa-dollar-sign text-green-600 text-xl"></i>
                            </div>
                        </div>
                        <p class="text-green-500 text-sm mt-4 flex items-center gap-1">
                            <i class="fas fa-arrow-up"></i>
                            <span>+8%</span>
                            <span class="text-gray-400">from last month</span>
                        </p>
                    </div>

                    <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 card-hover">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="text-gray-500 text-sm font-medium">Low Stock</p>
                                <h3 class="text-3xl font-bold text-red-600 mt-2" id="lowStockCount">0</h3>
                            </div>
                            <div class="w-12 h-12 bg-red-50 rounded-xl flex items-center justify-center">
                                <i class="fas fa-exclamation-triangle text-red-600 text-xl"></i>
                            </div>
                        </div>
                        <p class="text-red-500 text-sm mt-4 flex items-center gap-1">
                            <i class="fas fa-arrow-up"></i>
                            <span>Needs attention</span>
                        </p>
                    </div>

                    <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 card-hover">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="text-gray-500 text-sm font-medium">Categories</p>
                                <h3 class="text-3xl font-bold text-gray-800 mt-2" id="categoryCount">0</h3>
                            </div>
                            <div class="w-12 h-12 bg-purple-50 rounded-xl flex items-center justify-center">
                                <i class="fas fa-tags text-purple-600 text-xl"></i>
                            </div>
                        </div>
                        <p class="text-gray-400 text-sm mt-4">Active categories</p>
                    </div>
                </div>

                <!-- Recent Activity & Quick Actions -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="lg:col-span-2 bg-white rounded-2xl shadow-sm border border-gray-100 p-6">
                        <h3 class="font-bold text-gray-800 mb-4">Recent Products</h3>
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead>
                                    <tr class="text-left text-sm text-gray-500 border-b border-gray-100">
                                        <th class="pb-3 font-medium">Product</th>
                                        <th class="pb-3 font-medium">Category</th>
                                        <th class="pb-3 font-medium">Stock</th>
                                        <th class="pb-3 font-medium">Price</th>
                                    </tr>
                                </thead>
                                <tbody id="recentProductsTable" class="text-sm">
                                    <!-- Dynamic content -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="bg-gradient-to-br from-indigo-600 to-purple-600 rounded-2xl shadow-lg p-6 text-white">
                        <h3 class="font-bold text-xl mb-2">Quick Actions</h3>
                        <p class="text-indigo-100 text-sm mb-6">Manage your inventory efficiently</p>

                        <div class="space-y-3">
                            <button onclick="openAddModal()"
                                class="w-full bg-white/20 backdrop-blur-sm hover:bg-white/30 transition-all py-3 rounded-xl flex items-center gap-3 px-4">
                                <i class="fas fa-plus-circle"></i>
                                Add New Product
                            </button>
                            <button onclick="showSection('inventory')"
                                class="w-full bg-white/20 backdrop-blur-sm hover:bg-white/30 transition-all py-3 rounded-xl flex items-center gap-3 px-4">
                                <i class="fas fa-search"></i>
                                Search Inventory
                            </button>
                            <button onclick="exportData()"
                                class="w-full bg-white/20 backdrop-blur-sm hover:bg-white/30 transition-all py-3 rounded-xl flex items-center gap-3 px-4">
                                <i class="fas fa-download"></i>
                                Export Data
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Inventory Section -->
            <div id="inventorySection" class="hidden space-y-6 animate-fade-in">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
                    <div>
                        <h1 class="text-3xl font-bold text-gray-800">Inventory</h1>
                        <p class="text-gray-500 mt-1">Manage your products and stock levels</p>
                    </div>
                    <div class="flex gap-3">
                        <div class="relative">
                            <i class="fas fa-search absolute left-4 top-3.5 text-gray-400"></i>
                            <input type="text" id="searchInput" oninput="filterProducts()"
                                placeholder="Search products..."
                                class="pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-indigo-500 w-64">
                        </div>
                        <button onclick="openAddModal()"
                            class="bg-indigo-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-indigo-700 transition-all shadow-lg hover:shadow-xl flex items-center gap-2">
                            <i class="fas fa-plus"></i>
                            Add Product
                        </button>
                    </div>
                </div>

                <!-- Filters -->
                <div class="flex gap-2 overflow-x-auto pb-2">
                    <button onclick="filterByCategory('all')"
                        class="category-filter active px-4 py-2 rounded-full bg-indigo-600 text-white text-sm font-medium transition-all"
                        data-category="all">
                        All
                    </button>
                    <button onclick="filterByCategory('Electronics')"
                        class="category-filter px-4 py-2 rounded-full bg-gray-200 text-gray-700 text-sm font-medium hover:bg-gray-300 transition-all"
                        data-category="Electronics">
                        Electronics
                    </button>
                    <button onclick="filterByCategory('Clothing')"
                        class="category-filter px-4 py-2 rounded-full bg-gray-200 text-gray-700 text-sm font-medium hover:bg-gray-300 transition-all"
                        data-category="Clothing">
                        Clothing
                    </button>
                    <button onclick="filterByCategory('Food')"
                        class="category-filter px-4 py-2 rounded-full bg-gray-200 text-gray-700 text-sm font-medium hover:bg-gray-300 transition-all"
                        data-category="Food">
                        Food & Beverage
                    </button>
                    <button onclick="filterByCategory('Home')"
                        class="category-filter px-4 py-2 rounded-full bg-gray-200 text-gray-700 text-sm font-medium hover:bg-gray-300 transition-all"
                        data-category="Home">
                        Home & Garden
                    </button>
                    <button onclick="filterByCategory('Other')"
                        class="category-filter px-4 py-2 rounded-full bg-gray-200 text-gray-700 text-sm font-medium hover:bg-gray-300 transition-all"
                        data-category="Other">
                        Other
                    </button>
                </div>

                <!-- Products Grid -->
                <div id="productsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                    <!-- Dynamic content -->
                </div>
            </div>

            <!-- Analytics Section -->
            <div id="analyticsSection" class="hidden space-y-6 animate-fade-in">
                <div>
                    <h1 class="text-3xl font-bold text-gray-800">Analytics</h1>
                    <p class="text-gray-500 mt-1">Insights into your inventory performance</p>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100">
                        <h3 class="font-bold text-gray-800 mb-4">Stock Distribution</h3>
                        <canvas id="stockChart" width="400" height="300"></canvas>
                    </div>
                    <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100">
                        <h3 class="font-bold text-gray-800 mb-4">Category Value</h3>
                        <canvas id="valueChart" width="400" height="300"></canvas>
                    </div>
                </div>
            </div>

            <!-- Settings Section -->
            <div id="settingsSection" class="hidden space-y-6 animate-fade-in max-w-2xl">
                <div>
                    <h1 class="text-3xl font-bold text-gray-800">Settings</h1>
                    <p class="text-gray-500 mt-1">Manage your account and preferences</p>
                </div>

                <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden">
                    <div class="p-6 border-b border-gray-100">
                        <h3 class="font-bold text-gray-800">Profile Information</h3>
                    </div>
                    <div class="p-6 space-y-4">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Full Name</label>
                                <input type="text" id="settingsName"
                                    class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-indigo-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                                <input type="email" id="settingsEmail" disabled
                                    class="w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-50 text-gray-500">
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Shop Name</label>
                            <input type="text" id="settingsShop"
                                class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-indigo-500">
                        </div>
                        <button onclick="saveSettings()"
                            class="bg-indigo-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-indigo-700 transition-all">
                            Save Changes
                        </button>
                    </div>
                </div>

                <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden">
                    <div class="p-6 border-b border-gray-100">
                        <h3 class="font-bold text-gray-800 text-red-600">Danger Zone</h3>
                    </div>
                    <div class="p-6">
                        <p class="text-gray-600 mb-4">Once you delete your account, there is no going back. Please be
                            certain.</p>
                        <button onclick="deleteAccount()"
                            class="border-2 border-red-500 text-red-500 px-6 py-3 rounded-xl font-semibold hover:bg-red-50 transition-all">
                            Delete Account
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Add/Edit Product Modal -->
    <div id="productModal"
        class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-lg animate-slide-up">
            <div class="p-6 border-b border-gray-100 flex justify-between items-center">
                <h3 class="text-xl font-bold text-gray-800" id="modalTitle">Add Product</h3>
                <button onclick="closeModal()"
                    class="w-8 h-8 rounded-full hover:bg-gray-100 flex items-center justify-center transition-colors">
                    <i class="fas fa-times text-gray-500"></i>
                </button>
            </div>
            <form id="productForm" onsubmit="saveProduct(event)" class="p-6 space-y-4">
                <input type="hidden" id="productId">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Product Name</label>
                    <input type="text" id="productName" required
                        class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-indigo-500">
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Category</label>
                        <select id="productCategory"
                            class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-indigo-500">
                            <option value="Electronics">Electronics</option>
                            <option value="Clothing">Clothing</option>
                            <option value="Food">Food & Beverage</option>
                            <option value="Home">Home & Garden</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Price ($)</label>
                        <input type="number" id="productPrice" step="0.01" min="0" required
                            class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-indigo-500">
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Stock Quantity</label>
                        <input type="number" id="productStock" min="0" required
                            class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-indigo-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">SKU</label>
                        <input type="text" id="productSKU" required
                            class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-indigo-500">
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                    <textarea id="productDescription" rows="3"
                        class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-indigo-500"></textarea>
                </div>
                <div class="flex gap-3 pt-4">
                    <button type="button" onclick="closeModal()"
                        class="flex-1 px-6 py-3 border border-gray-200 rounded-xl font-semibold hover:bg-gray-50 transition-all">
                        Cancel
                    </button>
                    <button type="submit"
                        class="flex-1 px-6 py-3 bg-indigo-600 text-white rounded-xl font-semibold hover:bg-indigo-700 transition-all shadow-lg">
                        Save Product
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="fixed bottom-4 right-4 transform translate-y-20 opacity-0 transition-all duration-300 z-50">
        <div class="bg-gray-800 text-white px-6 py-3 rounded-xl shadow-2xl flex items-center gap-3">
            <i class="fas fa-check-circle text-green-400"></i>
            <span id="toastMessage">Operation successful</span>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Data Management
        const StorageKeys = {
            USERS: 'inventory_users',
            CURRENT_USER: 'inventory_current_user',
            PRODUCTS: 'inventory_products'
        };

        let currentUser = null;
        let products = [];
        let currentFilter = 'all';

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            checkAuth();
        });

        // Auth Functions
        function checkAuth() {
            const savedUser = localStorage.getItem(StorageKeys.CURRENT_USER);
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                loadUserData();
                showDashboard();
            } else {
                showAuth();
            }
        }

        function switchAuthTab(tab) {
            const loginTab = document.getElementById('loginTab');
            const signupTab = document.getElementById('signupTab');
            const loginForm = document.getElementById('loginForm');
            const signupForm = document.getElementById('signupForm');

            if (tab === 'login') {
                loginTab.classList.add('bg-white', 'text-indigo-600', 'shadow-sm');
                loginTab.classList.remove('text-gray-500');
                signupTab.classList.remove('bg-white', 'text-indigo-600', 'shadow-sm');
                signupTab.classList.add('text-gray-500');
                loginForm.classList.remove('hidden');
                signupForm.classList.add('hidden');
            } else {
                signupTab.classList.add('bg-white', 'text-indigo-600', 'shadow-sm');
                signupTab.classList.remove('text-gray-500');
                loginTab.classList.remove('bg-white', 'text-indigo-600', 'shadow-sm');
                loginTab.classList.add('text-gray-500');
                signupForm.classList.remove('hidden');
                loginForm.classList.add('hidden');
            }
        }

        function handleSignup(e) {
            e.preventDefault();
            const name = document.getElementById('signupName').value;
            const email = document.getElementById('signupEmail').value.toLowerCase();
            const password = document.getElementById('signupPassword').value;
            const shop = document.getElementById('signupShop').value;

            let users = JSON.parse(localStorage.getItem(StorageKeys.USERS) || '[]');

            if (users.find(u => u.email === email)) {
                showToast('Email already registered!', 'error');
                return;
            }

            const newUser = {
                id: Date.now().toString(),
                name,
                email,
                password: btoa(password), // Simple encoding (not secure for production)
                shop,
                createdAt: new Date().toISOString()
            };

            users.push(newUser);
            localStorage.setItem(StorageKeys.USERS, JSON.stringify(users));

            // Initialize empty products for this user
            localStorage.setItem(`${StorageKeys.PRODUCTS}_${newUser.id}`, JSON.stringify([]));

            currentUser = newUser;
            localStorage.setItem(StorageKeys.CURRENT_USER, JSON.stringify(newUser));

            showToast('Account created successfully!');
            loadUserData();
            showDashboard();
        }

        function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value.toLowerCase();
            const password = document.getElementById('loginPassword').value;

            const users = JSON.parse(localStorage.getItem(StorageKeys.USERS) || '[]');
            const user = users.find(u => u.email === email && u.password === btoa(password));

            if (!user) {
                showToast('Invalid email or password!', 'error');
                return;
            }

            currentUser = user;
            localStorage.setItem(StorageKeys.CURRENT_USER, JSON.stringify(user));

            showToast('Welcome back!');
            loadUserData();
            showDashboard();
        }

        function logout() {
            localStorage.removeItem(StorageKeys.CURRENT_USER);
            currentUser = null;
            products = [];
            showAuth();
            showToast('Logged out successfully');
        }

        function deleteAccount() {
            if (!confirm('Are you sure? This will delete all your data permanently.')) return;

            let users = JSON.parse(localStorage.getItem(StorageKeys.USERS) || '[]');
            users = users.filter(u => u.id !== currentUser.id);
            localStorage.setItem(StorageKeys.USERS, JSON.stringify(users));

            localStorage.removeItem(`${StorageKeys.PRODUCTS}_${currentUser.id}`);
            localStorage.removeItem(StorageKeys.CURRENT_USER);

            currentUser = null;
            showAuth();
            showToast('Account deleted');
        }

        // UI Functions
        function showAuth() {
            document.getElementById('authContainer').classList.remove('hidden');
            document.getElementById('dashboardContainer').classList.add('hidden');
        }

        function showDashboard() {
            document.getElementById('authContainer').classList.add('hidden');
            document.getElementById('dashboardContainer').classList.remove('hidden');
            showSection('dashboard');
            updateDashboard();
        }

        function showSection(section) {
            // Hide all sections
            document.getElementById('dashboardSection').classList.add('hidden');
            document.getElementById('inventorySection').classList.add('hidden');
            document.getElementById('analyticsSection').classList.add('hidden');
            document.getElementById('settingsSection').classList.add('hidden');

            // Show selected
            document.getElementById(section + 'Section').classList.remove('hidden');

            // Update sidebar active state
            document.querySelectorAll('nav button').forEach(btn => {
                btn.classList.remove('bg-indigo-50', 'text-indigo-600');
                btn.classList.add('text-gray-600');
            });

            event.target.closest('button').classList.add('bg-indigo-50', 'text-indigo-600');
            event.target.closest('button').classList.remove('text-gray-600');

            if (section === 'analytics') {
                setTimeout(updateCharts, 100);
            }
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('-translate-x-full');
        }

        // Data Management
        function loadUserData() {
            document.getElementById('userNameDisplay').textContent = currentUser.name;
            document.getElementById('userEmailDisplay').textContent = currentUser.email;
            document.getElementById('shopNameDisplay').textContent = currentUser.shop;
            document.getElementById('userAvatar').textContent = currentUser.name.split(' ').map(n => n[0]).join('').toUpperCase();

            // Load settings
            document.getElementById('settingsName').value = currentUser.name;
            document.getElementById('settingsEmail').value = currentUser.email;
            document.getElementById('settingsShop').value = currentUser.shop;

            // Load products
            products = JSON.parse(localStorage.getItem(`${StorageKeys.PRODUCTS}_${currentUser.id}`) || '[]');
        }

        function saveSettings() {
            const newName = document.getElementById('settingsName').value;
            const newShop = document.getElementById('settingsShop').value;

            currentUser.name = newName;
            currentUser.shop = newShop;

            // Update in users array
            let users = JSON.parse(localStorage.getItem(StorageKeys.USERS) || '[]');
            const idx = users.findIndex(u => u.id === currentUser.id);
            if (idx !== -1) {
                users[idx] = currentUser;
                localStorage.setItem(StorageKeys.USERS, JSON.stringify(users));
            }

            localStorage.setItem(StorageKeys.CURRENT_USER, JSON.stringify(currentUser));
            loadUserData();
            showToast('Settings saved!');
        }

        // Product Management
        function openAddModal(productId = null) {
            const modal = document.getElementById('productModal');
            const form = document.getElementById('productForm');
            const title = document.getElementById('modalTitle');

            form.reset();
            document.getElementById('productId').value = '';

            if (productId) {
                const product = products.find(p => p.id === productId);
                if (product) {
                    title.textContent = 'Edit Product';
                    document.getElementById('productId').value = product.id;
                    document.getElementById('productName').value = product.name;
                    document.getElementById('productCategory').value = product.category;
                    document.getElementById('productPrice').value = product.price;
                    document.getElementById('productStock').value = product.stock;
                    document.getElementById('productSKU').value = product.sku;
                    document.getElementById('productDescription').value = product.description || '';
                }
            } else {
                title.textContent = 'Add Product';
                document.getElementById('productSKU').value = 'SKU-' + Math.random().toString(36).substr(2, 9).toUpperCase();
            }

            modal.classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('productModal').classList.add('hidden');
        }

        function saveProduct(e) {
            e.preventDefault();

            const id = document.getElementById('productId').value;
            const productData = {
                id: id || Date.now().toString(),
                name: document.getElementById('productName').value,
                category: document.getElementById('productCategory').value,
                price: parseFloat(document.getElementById('productPrice').value),
                stock: parseInt(document.getElementById('productStock').value),
                sku: document.getElementById('productSKU').value,
                description: document.getElementById('productDescription').value,
                updatedAt: new Date().toISOString()
            };

            if (id) {
                const idx = products.findIndex(p => p.id === id);
                if (idx !== -1) {
                    productData.createdAt = products[idx].createdAt;
                    products[idx] = productData;
                }
            } else {
                productData.createdAt = new Date().toISOString();
                products.push(productData);
            }

            saveProducts();
            closeModal();
            updateDashboard();
            showToast(id ? 'Product updated!' : 'Product added!');
        }

        function deleteProduct(id) {
            if (!confirm('Delete this product?')) return;
            products = products.filter(p => p.id !== id);
            saveProducts();
            updateDashboard();
            showToast('Product deleted');
        }

        function saveProducts() {
            localStorage.setItem(`${StorageKeys.PRODUCTS}_${currentUser.id}`, JSON.stringify(products));
        }

        // Dashboard & UI Updates
        function updateDashboard() {
            // Stats
            document.getElementById('totalProducts').textContent = products.length;

            const totalValue = products.reduce((sum, p) => sum + (p.price * p.stock), 0);
            document.getElementById('totalValue').textContent = '$' + totalValue.toLocaleString();

            const lowStock = products.filter(p => p.stock < 10).length;
            document.getElementById('lowStockCount').textContent = lowStock;

            const categories = [...new Set(products.map(p => p.category))];
            document.getElementById('categoryCount').textContent = categories.length;

            // Recent products table
            const recentTable = document.getElementById('recentProductsTable');
            const recent = [...products].sort((a, b) => new Date(b.updatedAt) - new Date(a.updatedAt)).slice(0, 5);

            recentTable.innerHTML = recent.map(p => `
                <tr class="border-b border-gray-50 last:border-0 hover:bg-gray-50 transition-colors">
                    <td class="py-3 font-medium text-gray-800">${p.name}</td>
                    <td class="py-3 text-gray-600">${p.category}</td>
                    <td class="py-3">
                        <span class="px-2 py-1 rounded-full text-xs font-medium ${p.stock < 10 ? 'bg-red-100 text-red-600' : 'bg-green-100 text-green-600'}">
                            ${p.stock} units
                        </span>
                    </td>
                    <td class="py-3 font-medium text-gray-800">$${p.price}</td>
                </tr>
            `).join('');

            renderProducts();
        }

        function renderProducts() {
            const grid = document.getElementById('productsGrid');
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();

            let filtered = products;

            if (currentFilter !== 'all') {
                filtered = filtered.filter(p => p.category === currentFilter);
            }

            if (searchTerm) {
                filtered = filtered.filter(p =>
                    p.name.toLowerCase().includes(searchTerm) ||
                    p.sku.toLowerCase().includes(searchTerm)
                );
            }

            if (filtered.length === 0) {
                grid.innerHTML = `
                    <div class="col-span-full text-center py-12 text-gray-400">
                        <i class="fas fa-box-open text-6xl mb-4"></i>
                        <p>No products found</p>
                    </div>
                `;
                return;
            }

            grid.innerHTML = filtered.map(p => `
                <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden card-hover group">
                    <div class="h-32 bg-gradient-to-br from-indigo-100 to-purple-100 flex items-center justify-center relative overflow-hidden">
                        <i class="fas fa-box text-4xl text-indigo-300 group-hover:scale-110 transition-transform duration-300"></i>
                        <div class="absolute top-3 right-3 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity">
                            <button onclick="openAddModal('${p.id}')" class="w-8 h-8 bg-white rounded-lg shadow-md flex items-center justify-center text-indigo-600 hover:bg-indigo-50">
                                <i class="fas fa-edit text-sm"></i>
                            </button>
                            <button onclick="deleteProduct('${p.id}')" class="w-8 h-8 bg-white rounded-lg shadow-md flex items-center justify-center text-red-600 hover:bg-red-50">
                                <i class="fas fa-trash text-sm"></i>
                            </button>
                        </div>
                    </div>
                    <div class="p-5">
                        <div class="flex justify-between items-start mb-2">
                            <span class="px-2 py-1 bg-indigo-50 text-indigo-600 text-xs font-medium rounded-lg">${p.category}</span>
                            <span class="text-xs text-gray-400">${p.sku}</span>
                        </div>
                        <h3 class="font-bold text-gray-800 mb-1 truncate">${p.name}</h3>
                        <p class="text-gray-500 text-sm mb-3 line-clamp-2 h-10">${p.description || 'No description'}</p>
                        <div class="flex justify-between items-center pt-3 border-t border-gray-100">
                            <span class="text-2xl font-bold text-gray-800">$${p.price}</span>
                            <span class="text-sm ${p.stock < 10 ? 'text-red-500 font-medium' : 'text-gray-500'}">
                                ${p.stock} in stock
                            </span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function filterProducts() {
            renderProducts();
        }

        function filterByCategory(category) {
            currentFilter = category;

            // Update UI
            document.querySelectorAll('.category-filter').forEach(btn => {
                if (btn.dataset.category === category) {
                    btn.classList.add('bg-indigo-600', 'text-white');
                    btn.classList.remove('bg-gray-200', 'text-gray-700', 'hover:bg-gray-300');
                } else {
                    btn.classList.remove('bg-indigo-600', 'text-white');
                    btn.classList.add('bg-gray-200', 'text-gray-700', 'hover:bg-gray-300');
                }
            });

            renderProducts();
        }

        // Charts
        function updateCharts() {
            const ctx1 = document.getElementById('stockChart').getContext('2d');
            const ctx2 = document.getElementById('valueChart').getContext('2d');

            // Destroy existing charts
            if (window.stockChart) window.stockChart.destroy();
            if (window.valueChart) window.valueChart.destroy();

            // Stock distribution by category
            const categoryStock = {};
            products.forEach(p => {
                categoryStock[p.category] = (categoryStock[p.category] || 0) + p.stock;
            });

            window.stockChart = new Chart(ctx1, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(categoryStock),
                    datasets: [{
                        data: Object.values(categoryStock),
                        backgroundColor: ['#6366f1', '#8b5cf6', '#ec4899', '#10b981', '#f59e0b']
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });

            // Value by category
            const categoryValue = {};
            products.forEach(p => {
                categoryValue[p.category] = (categoryValue[p.category] || 0) + (p.price * p.stock);
            });

            window.valueChart = new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: Object.keys(categoryValue),
                    datasets: [{
                        label: 'Total Value ($)',
                        data: Object.values(categoryValue),
                        backgroundColor: '#6366f1',
                        borderRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        // Utilities
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toastMessage');
            const icon = toast.querySelector('i');

            toastMessage.textContent = message;

            if (type === 'error') {
                icon.className = 'fas fa-exclamation-circle text-red-400';
            } else {
                icon.className = 'fas fa-check-circle text-green-400';
            }

            toast.classList.remove('translate-y-20', 'opacity-0');

            setTimeout(() => {
                toast.classList.add('translate-y-20', 'opacity-0');
            }, 3000);
        }

        function exportData() {
            const data = {
                user: currentUser,
                products: products,
                exportedAt: new Date().toISOString()
            };

            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `inventory-backup-${new Date().toISOString().split('T')[0]}.json`;
            a.click();

            showToast('Data exported!');
        }

        // Close modal on outside click
        document.getElementById('productModal').addEventListener('click', (e) => {
            if (e.target === e.currentTarget) closeModal();
        });
    </script>
</body>

</html>